window.__require=function e(t,n,i){function a(r,c){if(!n[r]){if(!t[r]){var o=r.split("/");if(o=o[o.length-1],!t[o]){var p="function"==typeof __require&&__require;if(!c&&p)return p(o,!0);if(s)return s(o,!0);throw new Error("Cannot find module '"+r+"'")}}var u=n[r]={exports:{}};t[r][0].call(u.exports,function(e){return a(t[r][1][e]||e)},u,u.exports,e,t,n,i)}return n[r].exports}for(var s="function"==typeof __require&&__require,r=0;r<i.length;r++)a(i[r]);return a}({BackGround:[function(e,t,n){"use strict";cc._RF.push(t,"6fb9209mu9Gxo6IYl8K/1Yt","BackGround");e("Player");cc.Class({extends:cc.Component,properties:{speed:0,resetX:0},onLoad:function(){this.registerListen()},registerListen:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(){return _G.player.jump(),!0},this)},update:function(e){if(_G.game.GameState===_G.GameManager.GameState.Run){var t=this.node.x;(t+=this.speed*e)<=-this.resetX&&(t=this.resetX),this.node.x=t}}}),cc._RF.pop()},{Player:"Player"}],GameOverMenu:[function(e,t,n){"use strict";cc._RF.push(t,"95aefCFcN9BlZByGKIP5w8m","GameOverMenu"),cc.Class({extends:cc.Component,properties:{score:cc.Label,button_play:cc.Node},onLoad:function(){this.button_play.on(cc.Node.EventType.TOUCH_START,this.restart,this)},restart:function(){cc.director.loadScene("gameScene")}}),cc._RF.pop()},{}],Game:[function(e,t,n){"use strict";cc._RF.push(t,"0b90d67qXZM7IxHhi/W3vmE","Game");var i=e("Player"),a=(e("BackGround"),cc.Enum({Menu:-1,Run:-1,Over:-1})),s=cc.Class({extends:cc.Component,properties:{player:i,gameOverMenu:cc.Node,lbl_score:cc.Label,playBtn:cc.Node},statics:{GameState:a},onLoad:function(){_G.GameManager=s,_G.game=this,_G.player=this.player,cc.director.getCollisionManager().enabled=!0,this.GameState=a.Menu,this.score=0,this.lbl_score.string=this.score,this.playBtn.on(cc.Node.EventType.TOUCH_START,this.startGame,this),this.gameOverMenu.active=!1,this.player.init()},startGame:function(){this.GameState=a.Run,this.score=0,this.playBtn.active=!1,_G.pipeManager.startSpawn(),this.player.startRun()},gameOver:function(){_G.pipeManager.reset(),this.GameState=a.Over,this.gameOverMenu.active=!0,this.gameOverMenu.getComponent("GameOverMenu").score.string=this.score},gainScore:function(){this.score++,this.lbl_score.string=this.score}});cc._RF.pop()},{BackGround:"BackGround",Player:"Player"}],Global:[function(e,t,n){"use strict";cc._RF.push(t,"f9e1dzFvTxEfqEcMW7OA2JL","Global"),window._G={GameManager:null,gameName:"FlappyBird",game:null,player:null,pipeManager:null},cc._RF.pop()},{}],PipeManager:[function(e,t,n){"use strict";cc._RF.push(t,"76c8fgoyRdKzZGpwzVE2DVA","PipeManager");var i=e("Pipe");cc.Class({extends:cc.Component,properties:{pipePrefab:cc.Prefab,pipeLayer:cc.Node,initPipeX:0,spawnInterval:0},onLoad:function(){_G.pipeManager=this},startSpawn:function(){this.spawnPipe(),this.schedule(this.spawnPipe,this.spawnInterval)},spawnPipe:function(){var e=cc.instantiate(this.pipePrefab).getComponent(i);this.pipeLayer.addChild(e.node),e.node.active=!0,e.node.x=this.initPipeX},despawnPipe:function(e){e.node.removeFromParent(),e.node.active=!1},reset:function(){this.unschedule(this.spawnPipe)}}),cc._RF.pop()},{Pipe:"Pipe"}],Pipe:[function(e,t,n){"use strict";cc._RF.push(t,"78feasPazpLiKX9nE7+gbNV","Pipe"),cc.Class({extends:cc.Component,properties:{speed:0,topPipe:cc.Node,botPipe:cc.Node},onEnable:function(){var e=500*Math.random()-2300;this.topPipe.y=e+1350,this.botPipe.y=e},update:function(e){_G.game.GameState===_G.GameManager.GameState.Run&&(this.node.x+=this.speed*e,this.node.getBoundingBoxToWorld().xMax<0&&_G.pipeManager.despawnPipe(this))}}),cc._RF.pop()},{}],Player:[function(e,t,n){"use strict";var i;function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"d868f9E5bpCRKEjU/63HUoK","Player");var s=cc.Enum({None:-1,Run:-1,Jump:-1,Drop:-1,DropEnd:-1,Dead:-1});cc.Class({extends:cc.Component,properties:(i={maxY:0,jumpHeight:0},a(i,"maxY",0),a(i,"groundY",0),a(i,"gravity",0),a(i,"initJumpSpeed",0),a(i,"_state",s.None),a(i,"state",{get:function(){return this._state},set:function(e){e!==this._state&&(this._state=e)},type:s}),i),statics:{State:s},init:function(){this.currentSpeed=0,this.state=s.None},onCollisionEnter:function(e){if(this.state!==s.Dead){var t=cc.game.groupList[e.node.groupIndex];"Obstacle"===t?(this.state=s.Dead,_G.game.gameOver()):"NextPipe"===t&&_G.game.gainScore()}},jump:function(){this.state=s.Jump,this.currentSpeed=this.initJumpSpeed},startRun:function(){this.state=s.Run},onDropFinished:function(){this.state=s.Run},update:function(e){switch(this.state){case s.Jump:this.currentSpeed<0&&(this.state=s.Drop);break;case s.Drop:this.node.y<this.groundY&&(this.node.y=this.groundY,this.state=s.DropEnd);break;case s.None:case s.Dead:return}(this.state===s.Jump||this.node.y>this.groundY)&&(this.currentSpeed-=e*this.gravity,this.node.y+=e*this.currentSpeed)}}),cc._RF.pop()},{}]},{},["BackGround","Game","GameOverMenu","Global","Pipe","PipeManager","Player"]);