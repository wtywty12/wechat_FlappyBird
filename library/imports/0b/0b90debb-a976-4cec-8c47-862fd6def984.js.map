{"version":3,"sources":["../../../../assets/scripts/assets/scripts/Game.js"],"names":["Player","require","BackGround","GameState","cc","Enum","Menu","Run","Over","GameManager","Class","extends","Component","properties","player","gameOverMenu","Node","lbl_score","Label","playBtn","statics","onLoad","_G","game","director","getCollisionManager","enabled","score","string","on","EventType","TOUCH_START","startGame","active","init","pipeManager","startSpawn","startRun","gameOver","reset","getComponent","gainScore"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIA,SAASC,QAAQ,QAAR,CAAb;AACA,IAAIC,aAAaD,QAAQ,YAAR,CAAjB;AACA;;AAEA,IAAIE,YAAYC,GAAGC,IAAH,CAAQ;AACpBC,UAAM,CAAC,CADa;AAEpBC,SAAM,CAAC,CAFa;AAGpBC,UAAM,CAAC;AAHa,CAAR,CAAhB;AAKA,IAAIC,cAAcL,GAAGM,KAAH,CAAS;AACvBC,aAASP,GAAGQ,SADW;;AAGvBC,gBAAY;AACR;AACAC,gBAAQd,MAFA;AAGR;AACAe,sBAAcX,GAAGY,IAJT;AAKR;AACAC,mBAAWb,GAAGc,KANN;AAOR;AACA;AACA;AACA;AACA;AACAC,iBAASf,GAAGY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3BQ,KAHW;AAgCvBI,aAAS;AACLjB;AADK,KAhCc;AAmCvBkB,UAnCuB,oBAmCb;AACNC,WAAGb,WAAH,GAAiBA,WAAjB;AACAa,WAAGC,IAAH,GAAU,IAAV;AACAD,WAAGR,MAAH,GAAY,KAAKA,MAAjB;;AAEA;AACAV,WAAGoB,QAAH,CAAYC,mBAAZ,GAAkCC,OAAlC,GAA4C,IAA5C;AACA;AACA;AACA;AACA;AACA;AACA,aAAKvB,SAAL,GAAiBA,UAAUG,IAA3B;AACA;AACA,aAAKqB,KAAL,GAAa,CAAb;AACA,aAAKV,SAAL,CAAeW,MAAf,GAAwB,KAAKD,KAA7B;;AAEA,aAAKR,OAAL,CAAaU,EAAb,CAAgBzB,GAAGY,IAAH,CAAQc,SAAR,CAAkBC,WAAlC,EAA8C,KAAKC,SAAnD,EAA6D,IAA7D;AACA,aAAKjB,YAAL,CAAkBkB,MAAlB,GAA2B,KAA3B;AACA,aAAKnB,MAAL,CAAYoB,IAAZ;AACH,KAvDsB;;;AAyDvB;AACAF,aA1DuB,uBA0DV;AACT,aAAK7B,SAAL,GAAiBA,UAAUI,GAA3B;AACA,aAAKoB,KAAL,GAAa,CAAb;AACA,aAAKR,OAAL,CAAac,MAAb,GAAsB,KAAtB;AACAX,WAAGa,WAAH,CAAeC,UAAf;AACA,aAAKtB,MAAL,CAAYuB,QAAZ;AAEH,KAjEsB;AAkEvBC,YAlEuB,sBAkEX;AACR;AACA;AACA;AACA;AACAhB,WAAGa,WAAH,CAAeI,KAAf;AACA,aAAKpC,SAAL,GAAiBA,UAAUK,IAA3B;AACA,aAAKO,YAAL,CAAkBkB,MAAlB,GAA2B,IAA3B;AACA,aAAKlB,YAAL,CAAkByB,YAAlB,CAA+B,cAA/B,EAA+Cb,KAA/C,CAAqDC,MAArD,GAA8D,KAAKD,KAAnE;AACH,KA3EsB;;AA4EvB;AACAc,aA7EuB,uBA6EV;AACT;AACA,aAAKd,KAAL;AACA,aAAKV,SAAL,CAAeW,MAAf,GAAwB,KAAKD,KAA7B;AACA;AACA;AACH;AAnFsB,CAAT,CAAlB","file":"Game.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\nvar Player = require('Player');\nvar BackGround = require('BackGround');\n// var PipeManager = require('PipeManager')\n\nvar GameState = cc.Enum({\n    Menu: -1,\n    Run : -1,\n    Over: -1\n});\nvar GameManager = cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        //-- 获取角色\n        player: Player,\n        //-- 获取gameOverMenu对象\n        gameOverMenu: cc.Node,\n        //-- 获取分数对象\n        lbl_score: cc.Label,\n        //-- 获取背景音效\n        // gameBgAudio: {\n        //     default: null,\n        //     url: cc.AudioClip\n        // },\n        playBtn: cc.Node,\n        //-- 获取死亡音效\n        // dieAudio: {\n        //     default: null,\n        //     url: cc.AudioClip\n        // },\n        //-- 获取失败音效\n        // gameOverAudio: {\n        //     default: null,\n        //     url: cc.AudioClip\n        // },\n        // //-- 获取得分音效\n        // scoreAudio: {\n        //     default: null,\n        //     url: cc.AudioClip\n        // }\n    },\n    statics: {\n        GameState\n    },\n    onLoad () {\n        _G.GameManager = GameManager;\n        _G.game = this;\n        _G.player = this.player\n\n        // activate colliders\n        cc.director.getCollisionManager().enabled = true;\n        // cc.director.getCollisionManager().enabledDebugDraw = true\n        // cc.director.enabledDrawBoundingBox = true;\n        // activate colliders\n        // cc.director.getCollisionManager().enabled = true;\n        //-- 游戏状态\n        this.GameState = GameState.Menu;\n        //-- 分数\n        this.score = 0;\n        this.lbl_score.string = this.score;\n\n        this.playBtn.on(cc.Node.EventType.TOUCH_START,this.startGame,this)\n        this.gameOverMenu.active = false;\n        this.player.init();\n    },\n\n    //-- 开始\n    startGame () {\n        this.GameState = GameState.Run;\n        this.score = 0;\n        this.playBtn.active = false;\n        _G.pipeManager.startSpawn();\n        this.player.startRun();\n\n    },\n    gameOver () {\n        //-- 背景音效停止，死亡音效播放\n        // cc.audioEngine.stopMusic(this.gameBgAudio);\n        // cc.audioEngine.playEffect(this.dieAudio);\n        // cc.audioEngine.playEffect(this.gameOverAudio);\n        _G.pipeManager.reset();\n        this.GameState = GameState.Over;\n        this.gameOverMenu.active = true;\n        this.gameOverMenu.getComponent('GameOverMenu').score.string = this.score;\n    },\n    //-- 更新分数\n    gainScore () {\n        //-- 分数+1\n        this.score++;\n        this.lbl_score.string = this.score;\n        //-- 分数增加音效\n        // cc.audioEngine.playEffect(this.scoreAudio);\n    }\n});\n\n\n"]}